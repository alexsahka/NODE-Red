<!--
  Jo Torsmyr
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/x-red" data-template-name="sendsms">
    <div class="form-row">
        <label for="node-input-recipients"><i class="icon-tag"></i> Recipients</label>
        <input type="text" id="node-input-recipients" placeholder="Recipients">
    </div>
    <div class="form-row">
        <label for="node-input-message"><i class="icon-tag"></i> Message</label>
        <input type="text" id="node-input-message" placeholder="Message">
    </div>
    <div class="form-row">
        <label for="node-input-debug"><i class="icon-tag"></i> Console log</label>
        <input type="checkbox" id="node-input-debug" placeholder="Debug">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="sendsms">
    <h4>Telenor send SMS</h4>
    <p>Send SMS, sender will be your Telenor cell phone number. Please note that you need to be logged in
      to send SMS. You can use the Telenor SMS Node-RED Login node for this.</p>
    <h4>Input parameters</h4>
    <p>Parameters can either be provided in the nodes property GUI, or using Node-RED msg URI query parameters, or secondly JSON payload</p>
    <ul>
      <li>Query parameters</li>
        <p>URI: ?recipients=&lt;recipient cell phone numbers (comma-separated)&gt;&message=&lt;SMS message text&gt;</p>
        <p>Resulting in: msg.payload.recipients=&lt;recipient cell phone numbers&gt;, msg.payload.message=&lt;SMS message text&gt;</p>
        <p>URI sample: <code>?recipients=12345678&message=Hello</code></p>
      <li>JSON payload</li>
        <p>Payload: { "recipients" : "recipient cell phone numbers (comma-separated)", "message" : "SMS message text" }</p>
      <li>Response message</li>
        <p>Output: {sent : [true | false], message : &lt;sendSMSstatusText&gt;}</p>
        <p>Output sample: <code>{"sent" : true, "messageStatus" : "Sendt", "recipients": "12345678","message":"Hello"}</code></p>
    </ul>
</script>

<script type="text/javascript">
    RED.nodes.registerType('sendsms', {
        category : 'telenorsms',
        color : 'LightSkyBlue',
        defaults: {
            recipients : {value : ''},
            message : {value : ''},
            debug : {value : false },
            name : {value : ''}
        },
        inputs : 1,
        outputs : 1,
        icon : 'telenor.png',
        label : function() {
            return this.name || 'sendsms';
        },
    });
</script>
